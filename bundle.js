(()=>{"use strict";const t="https://proxy-h8wsabq2m-thesergs.vercel.app/";var e=function(t,e,n,o){return new(n||(n=Promise))((function(r,c){function u(t){try{a(o.next(t))}catch(t){c(t)}}function i(t){try{a(o.throw(t))}catch(t){c(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,i)}a((o=o.apply(t,e||[])).next())}))};const n=document.getElementById("portfolioForm"),o=document.getElementById("startDate"),r=document.getElementById("stockSymbol"),c=document.getElementById("monthsQuantity"),u=document.getElementById("investmentAmount"),i=document.getElementById("resultTable");function a(t,e){const n=e.findIndex((e=>e>t)),o=n-1;return e[n]-t>t-e[o]?o:n}function s(t,e){const n=new Date(t);return n.setMonth(n.getMonth()+e)}function l(t){return Math.floor(t/1e3)}n.addEventListener("submit",(function(n){return e(this,void 0,void 0,(function*(){n.preventDefault();const d=yield function(n,o,r){return e(this,void 0,void 0,(function*(){const e=new Date(o).getTime(),c=new Date(s(e,r)),u=l(e),i=l(c.getTime()),a=`${t}chart/${n}?period1=${u}&period2=${i}&interval=1d`,d=yield fetch(a);return yield d.json()}))}(r.value,o.value,+c.value),f=d.chart.result[0].indicators.quote[0],m=d.chart.result[0].timestamp,h=function(t,e){const n=[],o=1e3*t[0];for(let r=0;r<e;r++){const e=a(l(s(o,r)),t);n.push(e)}return n}(m,+c.value),p=function(t,e,n,o){return t.reduce(((t,r,c)=>{const u=new Date(1e3*e[r]),i=n.close[r],a=o/i,s=t[c].stocksTotal+a,l=s*i,d=o*(c+1);return t.push({date:u.toLocaleDateString("en-US"),price:i,investedTotal:d,stocksTotal:s,portfolioTotal:l,percentTotal:l-d}),t}),[{date:null,price:0,stocksTotal:0,investedTotal:0,percentTotal:0,portfolioTotal:0}]).slice(1)}(h,m,f,+u.value);!function(t,e){const n=function(t){return`<thead>${Object.keys(t[0]).map((t=>`<th>${t}</th>`)).join("")}</thead>`}(e),o=function(t){let e="";return t.forEach((t=>{const n=Object.keys(t).map((e=>{return`<td>${n=t[e],"number"==typeof n?(Math.round(100*n)/100).toString():n}</td>`;var n}));e+=`<tr>${n.join("")}</tr>`})),`<tbody>${e}</tbody>`}(e);t.innerHTML=n+o}(i,p)}))}))})();