(()=>{"use strict";const t="https://proxy-h8wsabq2m-thesergs.vercel.app/";var e=function(t,e,n,o){return new(n||(n=Promise))((function(r,c){function u(t){try{a(o.next(t))}catch(t){c(t)}}function i(t){try{a(o.throw(t))}catch(t){c(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,i)}a((o=o.apply(t,e||[])).next())}))};let n=!1;const o=document.getElementById("portfolioForm"),r=document.getElementById("startDate"),c=document.getElementById("tillNow"),u=document.getElementById("monthsQuantity"),i=document.getElementById("stockSymbol"),a=document.getElementById("investmentAmount"),l=document.getElementById("resultTable");function s(t,e){const n=e.findIndex((e=>e>t)),o=n-1;return e[n]-t>t-e[o]?o:n}function d(t,e){const n=new Date(t);return n.setMonth(n.getMonth()+e)}function f(t){return Math.floor(t/1e3)}c.addEventListener("change",(()=>{n=c.checked,u.disabled=n})),o.addEventListener("submit",(function(o){return e(this,void 0,void 0,(function*(){o.preventDefault();const c=n?function(t,e){const n=new Date(t),o=new Date(e);let r=12*(o.getFullYear()-n.getFullYear());return r-=n.getMonth(),r+=o.getMonth(),r}(r.value,(new Date).toString()):+u.value,h=yield function(n,o,r){return e(this,void 0,void 0,(function*(){const e=new Date(o).getTime(),c=new Date(d(e,r)),u=f(e),i=f(c.getTime()),a=`${t}chart/${n}?period1=${u}&period2=${i}&interval=1d`,l=yield fetch(a);return yield l.json()}))}(i.value,r.value,c),m=h.chart.result[0].indicators.quote[0],p=h.chart.result[0].timestamp,v=function(t,e){const n=[],o=1e3*t[0];for(let r=0;r<e;r++){const e=s(f(d(o,r)),t);n.push(e)}return n}(p,c),y=function(t,e,n,o){return t.reduce(((t,r,c)=>{const u=new Date(1e3*e[r]),i=n.close[r],a=o/i,l=t[c].stocksTotal+a,s=l*i,d=o*(c+1);return t.push({date:u.toLocaleDateString("en-US"),price:i,investedTotal:d,stocksTotal:l,portfolioTotal:s,percentTotal:s-d}),t}),[{date:null,price:0,stocksTotal:0,investedTotal:0,percentTotal:0,portfolioTotal:0}]).slice(1)}(v,p,m,+a.value);!function(t,e){const n=function(t){return`<thead>${Object.keys(t[0]).map((t=>`<th>${t}</th>`)).join("")}</thead>`}(e),o=function(t){let e="";return t.forEach((t=>{const n=Object.keys(t).map((e=>{return`<td>${n=t[e],"number"==typeof n?(Math.round(100*n)/100).toString():n}</td>`;var n}));e+=`<tr>${n.join("")}</tr>`})),`<tbody>${e}</tbody>`}(e);t.innerHTML=n+o}(l,y)}))}))})();